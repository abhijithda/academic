/*	Name : ABHIJITH D.A.	Reg.no : 1PI01IS001

11B>.	Write a C program that accepts a file descriptor as a single
	command-line argument and then prints a descriptor of the 
	file flags for that descriptor. Use fcntl() function .
	The program should check for invalid arguments and error 
	return from fcntl() function.
*/

#include<stdio.h>
#include<stdlib.h>
#include<fcntl.h>

int main(int argc, char *argv[])
{
	int accmode,val;
	if(argc!=2)
		printf("\n\t Descriptor : ");
	if(val=fcntl(atoi(argv[1]),F_GETFL,0)<0)
		printf("\n\t fcntl error for fd %d",atoi(argv[1]));
	accmode=val & O_ACCMODE;
	if(accmode==O_RDONLY)
		printf("\n\t Read Only.");  
	else if(accmode==O_WRONLY)
		printf("\n\t Write Only.");
	else if(accmode==O_RDWR)
		printf("\n\t Read and Write.");
	else
		printf("\n\t Invalid access mode.");
	getchar();
}

/*----------------------------Outputs---------------------------


1>.[root@localhost unix]# ./a.out 1b.c

	 Read Only.

2>.[root@localhost unix]# ./.a 11b.x

	 fcntl error for fd 11
	 Write Only.

3>.[root@localhost unix]# ./a.out temp

	 Read Only.

*/
